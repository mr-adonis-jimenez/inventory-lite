<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Inventory Lite</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="assets/styles.css">
  <!-- QR scanning library -->
  <script src="https://unpkg.com/html5-qrcode" defer></script>
  <script src="assets/app.js" defer></script>
</head>
<body>
  <header class="top-bar">
    <div class="top-bar-left">
      <h1>Inventory Lite</h1>
      <span class="mode-label">Mode:</span>
      <select id="mode-select">
        <option value="local">Local (Browser)</option>
        <option value="sheets" disabled>Sheets (API â€“ to be wired)</option>
      </select>
    </div>
    <div class="top-bar-right">
      <button id="export-csv-btn" type="button">Export CSV</button>
      <button id="import-json-btn" type="button">Import JSON</button>
    </div>
  </header>

  <main class="layout">
    <section class="panel panel-form">
      <div class="panel-header">
        <h2>Add / Edit Asset</h2>
        <span class="env-status">GitHub Pages is live</span>
      </div>

      <form id="asset-form" autocomplete="off">
        <input type="hidden" id="editing-index" value="">

        <div class="form-row">
          <label for="tag">Tag <span class="required">*</span></label>
          <div class="tag-row">
            <input id="tag" name="tag" required placeholder="e.g. LAP-001">
            <button id="qr-for-tag-btn" type="button">QR for tag</button>
            <button id="scan-qr-btn" type="button">Scan QR</button>
          </div>
        </div>

        <div class="form-row">
          <label for="type">Type</label>
          <input id="type" name="type" placeholder="laptop, monitor, dock...">
        </div>

        <div class="form-row">
          <label for="model">Model</label>
          <input id="model" name="model" placeholder="e.g. Dell XPS 13">
        </div>

        <div class="form-row">
          <label for="serial">Serial</label>
          <input id="serial" name="serial" placeholder="Serial number">
        </div>

        <div class="form-row">
          <label for="owner">Owner</label>
          <input id="owner" name="owner" placeholder="Person or team">
        </div>

        <div class="form-row">
          <label for="location">Location</label>
          <input id="location" name="location" placeholder="Office, room, rack...">
        </div>

        <div class="form-row">
          <label for="in-service-date">In service</label>
          <input id="in-service-date" name="inServiceDate" type="date">
        </div>

        <div class="form-row">
          <label for="retired-date">Retired</label>
          <input id="retired-date" name="retiredDate" type="date">
        </div>

        <div class="form-row">
          <label for="notes">Notes</label>
          <textarea id="notes" name="notes" rows="2"
            placeholder="Asset condition, warranty, accessories, etc."></textarea>
        </div>

        <div class="form-actions">
          <button type="submit" id="save-asset-btn">Save asset</button>
          <button type="button" id="reset-form-btn" class="secondary">Reset</button>
        </div>

        <p class="small-text">
          Tags must be unique. Saving with an existing tag will update that asset.
        </p>
      </form>
    </section>

    <section class="panel panel-table">
      <div class="panel-header">
        <h2>Assets</h2>
        <div class="filters">
          <input id="search-input" placeholder="Search assets... (tag, owner, model, location)">
          <label class="inline">
            <input type="checkbox" id="active-only-checkbox" checked>
            Active only
          </label>
        </div>
      </div>

      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Tag</th>
              <th>Type</th>
              <th>Model</th>
              <th>Serial</th>
              <th>Owner</th>
              <th>Location</th>
              <th>In service</th>
              <th>Retired</th>
              <th>Status</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="asset-table-body">
            <!-- rows injected by JS -->
          </tbody>
        </table>
      </div>

      <footer class="panel-footer">
        <div id="summary-bar" class="summary-bar">
          <!-- summary stats populated by JS -->
        </div>
      </footer>
    </section>
  </main>

  <!-- Import JSON modal -->
  <div id="import-modal" class="modal hidden">
    <div class="modal-content">
      <h3>Import assets from JSON</h3>
      <p class="small-text">
        Expected format: an array of objects with keys:
        tag, type, model, serial, owner, location, inServiceDate, retiredDate, notes.
      </p>
      <input type="file" id="json-file-input" accept="application/json">
      <div class="modal-actions">
        <button type="button" id="import-confirm-btn">Import</button>
        <button type="button" id="import-cancel-btn" class="secondary">Cancel</button>
      </div>
      <div id="import-status" class="small-text"></div>
    </div>
  </div>

  <!-- QR for tag modal -->
  <div id="qr-modal" class="modal hidden">
    <div class="modal-content">
      <h3>QR code for tag</h3>
      <p id="qr-tag-label" class="small-text"></p>
      <div class="qr-container">
        <img id="qr-image" alt="QR code for tag">
      </div>
      <div class="modal-actions">
        <button type="button" id="qr-close-btn">Close</button>
      </div>
    </div>
  </div>

  <!-- QR scanner modal -->
  <div id="qr-scan-modal" class="modal hidden">
    <div class="modal-content">
      <h3>Scan QR</h3>
      <div id="qr-reader" class="qr-reader"></div>
      <p class="small-text">Decoded tags will populate the Tag field.</p>
      <div class="modal-actions">
        <button type="button" id="qr-scan-close-btn">Close</button>
      </div>
      <div id="qr-scan-status" class="small-text"></div>
    </div>
  </div>
</body>
</html>

